<!doctype html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
</head>

<body>
    <div id="vue-root">
        <ul>
            <li>はいプロ</li>
            <li>世界一<input v-model="text1">が上手</li>
            <li><input v-model="text2">界のtourist</li>
            <li><input v-model="text3">の終焉を告げる者</li>
            <li>実質<input v-model="text4"></li>
            <li><input v-model="text5">ために生まれてきた男</li>
        </ul>
        <p>{{message}}</p>
    </div>
    <div id="tweetButton"></div>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
    <!--<script src="https://unpkg.com/vue"></script>-->
    <script src="https://jp.vuejs.org/js/vue.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script>
        new Vue({
            el: '#vue-root',
            data: {
                text1: '起床',
                text2: '起床',
                text3: '布団時代',
                text4: '朝',
                text5: '起床する',
            },
            computed: {
                message() {
                    return `はいプロ 世界一${this.text1}が上手 ${this.text2}界のtourist ${this.text3}の終焉を告げる者 実質${this.text4} ${this.text5}ために生まれてきた男`;
                }
            },
        }).$watch(function() {
                return [this.text1, this.text2, this.text3, this.text4, this.text5]
            }, function () {
            const message = this.message;
            // // http://stackoverflow.com/a/10551031
            $('#tweetButton iframe').remove();
            const tweetButton = $('<a></a>')
                .addClass('twitter-share-button')
                .attr('href', 'https://twitter.com/share')
                .attr('data-url', 'https://arosh.github.io/funny/tourist.html')
                .attr('data-text', message)
                .attr('data-size', 'large');
            $('#tweetButton').append(tweetButton);
            let func;
            func = function() {
                if (window.twttr === undefined) {
                    setTimeout(func, 50);
                } else {
                    twttr.widgets.load();
                }
            }
            func();
        }, { immediate: true });
    </script>
</body>

</html>